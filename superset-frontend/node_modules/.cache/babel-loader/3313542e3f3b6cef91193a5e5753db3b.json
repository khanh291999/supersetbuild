{"ast":null,"code":"function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\nimport { SyncRegistry } from '@encodable/registry';\nimport { getCategoricalScheme, getColorSchemeRegistry } from '../scheme';\nimport stringifyAndTrim from '../utils/stringifyAndTrim';\nimport ScaleCategoricalColor from './ScaleCategoricalColor';\nexport default class ColorNamespace {\n  constructor(nameOrState) {\n    _defineProperty(this, \"state\", void 0);\n\n    _defineProperty(this, \"scales\", void 0);\n\n    this.state = typeof nameOrState === 'string' ? {\n      name: nameOrState,\n      manualColors: {},\n      scales: {} } :\n    nameOrState;\n    this.scales = new SyncRegistry();\n  }\n\n  get name() {\n    return this.state.name;\n  }\n  /**\n   * Check if the specified value is subjected to manual color assignment\n   * @param value\n   */\n\n\n  hasManualColor(value) {\n    return typeof this.state.manualColors[stringifyAndTrim(value)] !== 'undefined';\n  }\n  /**\n   * Enforce specific color for given value\n   * This will apply across all color scales\n   * in this namespace.\n   * @param {*} value value\n   * @param {*} manualColor color\n   */\n\n\n  setColor(value, manualColor) {\n    this.state.manualColors[stringifyAndTrim(value)] = manualColor;\n    return this;\n  }\n  /**\n   * Removed enforced specific color for given value\n   * This will apply across all color scales\n   * in this namespace.\n   * @param {*} value value\n   * @param {*} manualColor color\n   */\n\n\n  unsetColor(value) {\n    delete this.state.manualColors[stringifyAndTrim(value)];\n    return this;\n  }\n  /**\n   * Clear all manually assigned colors\n   */\n\n\n  clearManualColors() {\n    this.state.manualColors = {};\n    return this;\n  }\n\n  hasScale(scheme) {\n    return typeof this.state.scales[scheme] !== 'undefined';\n  }\n\n  getScale(scheme) {var _ref;\n    const schemeName = (_ref = scheme != null ? scheme : getColorSchemeRegistry().categorical.getDefaultKey()) != null ? _ref : 'undefined';\n\n    if (typeof this.state.scales[schemeName] === 'undefined') {var _getCategoricalScheme, _getCategoricalScheme2;\n      // create scale\n      const scale = new ScaleCategoricalColor((_getCategoricalScheme = (_getCategoricalScheme2 = getCategoricalScheme(schemeName)) == null ? void 0 : _getCategoricalScheme2.colors.slice()) != null ? _getCategoricalScheme : [], this.state.manualColors); // add state to lookup\n\n      this.state.scales[schemeName] = scale.state;\n      this.scales.registerValue(schemeName, scale);\n      return scale;\n    }\n\n    if (this.scales.has(schemeName)) {\n      return this.scales.get(schemeName);\n    } // create scale\n\n\n    const scale = new ScaleCategoricalColor(this.state.scales[schemeName], this.state.manualColors);\n    this.scales.registerValue(schemeName, scale);\n    return scale;\n  }}","map":null,"metadata":{},"sourceType":"module"}