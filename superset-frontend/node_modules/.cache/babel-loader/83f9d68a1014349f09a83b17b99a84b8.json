{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Card from 'src/components/Card';\nimport ProgressBar from 'src/components/ProgressBar';\nimport Label from 'src/components/Label';\nimport { t, useTheme } from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport TableView from 'src/components/TableView';\nimport Button from 'src/components/Button';\nimport { fDuration } from 'src/modules/dates';\nimport Icons from 'src/components/Icons';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ResultSet from '../ResultSet';\nimport ModalTrigger from '../../../components/ModalTrigger';\nimport HighlightedSql from '../HighlightedSql';\nimport { StaticPosition, verticalAlign, StyledTooltip } from './styles';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  columns: PropTypes.array,\n  actions: PropTypes.object,\n  queries: PropTypes.array,\n  onUserClicked: PropTypes.func,\n  onDbClicked: PropTypes.func,\n  displayLimit: PropTypes.number.isRequired };\n\nconst defaultProps = {\n  columns: ['started', 'duration', 'rows'],\n  queries: [],\n  onUserClicked: () => {},\n  onDbClicked: () => {} };\n\n\nconst openQuery = (id) => {\n  const url = `/superset/sqllab?queryId=${id}`;\n  window.open(url);\n};\n\nconst QueryTable = (props) => {\n  const theme = useTheme();\n  const statusAttributes = {\n    success: {\n      config: {\n        icon: ___EmotionJSX(Icons.Check, { iconColor: theme.colors.success.base }),\n        label: t('Success') } },\n\n\n    failed: {\n      config: {\n        icon: ___EmotionJSX(Icons.XSmall, { iconColor: theme.colors.error.base }),\n        label: t('Failed') } },\n\n\n    stopped: {\n      config: {\n        icon: ___EmotionJSX(Icons.XSmall, { iconColor: theme.colors.error.base }),\n        label: t('Failed') } },\n\n\n    running: {\n      config: {\n        icon: ___EmotionJSX(Icons.Running, { iconColor: theme.colors.primary.base }),\n        label: t('Running') } },\n\n\n    fetching: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.primary.base }),\n        label: t('fetching') } },\n\n\n    timed_out: {\n      config: {\n        icon: ___EmotionJSX(Icons.Offline, { iconColor: theme.colors.grayscale.light1 }),\n        label: t('Offline') } },\n\n\n    scheduled: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.grayscale.base }),\n        label: t('Scheduled') } },\n\n\n    pending: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.grayscale.base }),\n        label: t('Scheduled') } },\n\n\n    error: {\n      config: {\n        icon: ___EmotionJSX(Icons.Error, { iconColor: theme.colors.error.base }),\n        label: t('Unknown Status') } } };\n\n\n\n\n  const setHeaders = (column) => {\n    if (column === 'sql') {\n      return column.toUpperCase();\n    }\n    return column.charAt(0).toUpperCase().concat(column.slice(1));\n  };\n  const columns = useMemo(\n  () =>\n  props.columns.map((column) => ({\n    accessor: column,\n    Header: () => setHeaders(column),\n    disableSortBy: true })),\n\n  [props.columns]);\n\n\n  const user = useSelector(({ sqlLab: { user } }) => user);\n\n  const data = useMemo(() => {\n    const restoreSql = (query) => {\n      props.actions.queryEditorSetSql({ id: query.sqlEditorId }, query.sql);\n    };\n\n    const openQueryInNewTab = (query) => {\n      props.actions.cloneQueryToNewTab(query, true);\n    };\n\n    const openAsyncResults = (query, displayLimit) => {\n      props.actions.fetchQueryResults(query, displayLimit);\n    };\n\n    const clearQueryResults = (query) => {\n      props.actions.clearQueryResults(query);\n    };\n\n    const removeQuery = (query) => {\n      props.actions.removeQuery(query);\n    };\n\n    return props.queries.\n    map((query) => {\n      const q = { ...query };\n      const status = statusAttributes[q.state] || statusAttributes.error;\n\n      if (q.endDttm) {\n        q.duration = fDuration(q.startDttm, q.endDttm);\n      }\n      const time = moment(q.startDttm).format().split('T');\n      q.time =\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"span\", null,\n      time[0], \" \", ___EmotionJSX(\"br\", null), \" \", time[1]));\n\n\n\n      q.user =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => props.onUserClicked(q.userId) },\n\n      q.user);\n\n\n      q.db =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => props.onDbClicked(q.dbId) },\n\n      q.db);\n\n\n      q.started = moment(q.startDttm).format('HH:mm:ss');\n      q.querylink =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => openQuery(q.queryId) },\n\n      ___EmotionJSX(\"i\", { className: \"fa fa-external-link m-r-3\" }),\n      t('Edit'));\n\n\n      q.sql =\n      ___EmotionJSX(Card, { css: [StaticPosition, process.env.NODE_ENV === \"production\" ? \"\" : \";label:q-sql;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvUXVlcnlUYWJsZS9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd01nQiIsImZpbGUiOiIvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1F1ZXJ5VGFibGUvaW5kZXguanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgUHJvZ3Jlc3NCYXIgZnJvbSAnc3JjL2NvbXBvbmVudHMvUHJvZ3Jlc3NCYXInO1xuaW1wb3J0IExhYmVsIGZyb20gJ3NyYy9jb21wb25lbnRzL0xhYmVsJztcbmltcG9ydCB7IHQsIHVzZVRoZW1lIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgVGFibGVWaWV3IGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlVmlldyc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgeyBmRHVyYXRpb24gfSBmcm9tICdzcmMvbW9kdWxlcy9kYXRlcyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1Rvb2x0aXAnO1xuaW1wb3J0IFJlc3VsdFNldCBmcm9tICcuLi9SZXN1bHRTZXQnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL01vZGFsVHJpZ2dlcic7XG5pbXBvcnQgSGlnaGxpZ2h0ZWRTcWwgZnJvbSAnLi4vSGlnaGxpZ2h0ZWRTcWwnO1xuaW1wb3J0IHsgU3RhdGljUG9zaXRpb24sIHZlcnRpY2FsQWxpZ24sIFN0eWxlZFRvb2x0aXAgfSBmcm9tICcuL3N0eWxlcyc7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5LFxuICBhY3Rpb25zOiBQcm9wVHlwZXMub2JqZWN0LFxuICBxdWVyaWVzOiBQcm9wVHlwZXMuYXJyYXksXG4gIG9uVXNlckNsaWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuICBvbkRiQ2xpY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG4gIGRpc3BsYXlMaW1pdDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxufTtcbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgY29sdW1uczogWydzdGFydGVkJywgJ2R1cmF0aW9uJywgJ3Jvd3MnXSxcbiAgcXVlcmllczogW10sXG4gIG9uVXNlckNsaWNrZWQ6ICgpID0+IHt9LFxuICBvbkRiQ2xpY2tlZDogKCkgPT4ge30sXG59O1xuXG5jb25zdCBvcGVuUXVlcnkgPSBpZCA9PiB7XG4gIGNvbnN0IHVybCA9IGAvc3VwZXJzZXQvc3FsbGFiP3F1ZXJ5SWQ9JHtpZH1gO1xuICB3aW5kb3cub3Blbih1cmwpO1xufTtcblxuY29uc3QgUXVlcnlUYWJsZSA9IHByb3BzID0+IHtcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICBjb25zdCBzdGF0dXNBdHRyaWJ1dGVzID0ge1xuICAgIHN1Y2Nlc3M6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuQ2hlY2sgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuc3VjY2Vzcy5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ1N1Y2Nlc3MnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmYWlsZWQ6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuWFNtYWxsIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmVycm9yLmJhc2V9IC8+LFxuICAgICAgICBsYWJlbDogdCgnRmFpbGVkJyksXG4gICAgICB9LFxuICAgIH0sXG4gICAgc3RvcHBlZDoge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGljb246IDxJY29ucy5YU21hbGwgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuZXJyb3IuYmFzZX0gLz4sXG4gICAgICAgIGxhYmVsOiB0KCdGYWlsZWQnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBydW5uaW5nOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLlJ1bm5pbmcgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ1J1bm5pbmcnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmZXRjaGluZzoge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGljb246IDxJY29ucy5RdWV1ZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ2ZldGNoaW5nJyksXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGltZWRfb3V0OiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLk9mZmxpbmUgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0MX0gLz4sXG4gICAgICAgIGxhYmVsOiB0KCdPZmZsaW5lJyksXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2NoZWR1bGVkOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLlF1ZXVlZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX0gLz4sXG4gICAgICAgIGxhYmVsOiB0KCdTY2hlZHVsZWQnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwZW5kaW5nOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLlF1ZXVlZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX0gLz4sXG4gICAgICAgIGxhYmVsOiB0KCdTY2hlZHVsZWQnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBlcnJvcjoge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGljb246IDxJY29ucy5FcnJvciBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5lcnJvci5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ1Vua25vd24gU3RhdHVzJyksXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3Qgc2V0SGVhZGVycyA9IGNvbHVtbiA9PiB7XG4gICAgaWYgKGNvbHVtbiA9PT0gJ3NxbCcpIHtcbiAgICAgIHJldHVybiBjb2x1bW4udG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbHVtbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKS5jb25jYXQoY29sdW1uLnNsaWNlKDEpKTtcbiAgfTtcbiAgY29uc3QgY29sdW1ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIHByb3BzLmNvbHVtbnMubWFwKGNvbHVtbiA9PiAoe1xuICAgICAgICBhY2Nlc3NvcjogY29sdW1uLFxuICAgICAgICBIZWFkZXI6ICgpID0+IHNldEhlYWRlcnMoY29sdW1uKSxcbiAgICAgICAgZGlzYWJsZVNvcnRCeTogdHJ1ZSxcbiAgICAgIH0pKSxcbiAgICBbcHJvcHMuY29sdW1uc10sXG4gICk7XG5cbiAgY29uc3QgdXNlciA9IHVzZVNlbGVjdG9yKCh7IHNxbExhYjogeyB1c2VyIH0gfSkgPT4gdXNlcik7XG5cbiAgY29uc3QgZGF0YSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHJlc3RvcmVTcWwgPSBxdWVyeSA9PiB7XG4gICAgICBwcm9wcy5hY3Rpb25zLnF1ZXJ5RWRpdG9yU2V0U3FsKHsgaWQ6IHF1ZXJ5LnNxbEVkaXRvcklkIH0sIHF1ZXJ5LnNxbCk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9wZW5RdWVyeUluTmV3VGFiID0gcXVlcnkgPT4ge1xuICAgICAgcHJvcHMuYWN0aW9ucy5jbG9uZVF1ZXJ5VG9OZXdUYWIocXVlcnksIHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBvcGVuQXN5bmNSZXN1bHRzID0gKHF1ZXJ5LCBkaXNwbGF5TGltaXQpID0+IHtcbiAgICAgIHByb3BzLmFjdGlvbnMuZmV0Y2hRdWVyeVJlc3VsdHMocXVlcnksIGRpc3BsYXlMaW1pdCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNsZWFyUXVlcnlSZXN1bHRzID0gcXVlcnkgPT4ge1xuICAgICAgcHJvcHMuYWN0aW9ucy5jbGVhclF1ZXJ5UmVzdWx0cyhxdWVyeSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVF1ZXJ5ID0gcXVlcnkgPT4ge1xuICAgICAgcHJvcHMuYWN0aW9ucy5yZW1vdmVRdWVyeShxdWVyeSk7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9wcy5xdWVyaWVzXG4gICAgICAubWFwKHF1ZXJ5ID0+IHtcbiAgICAgICAgY29uc3QgcSA9IHsgLi4ucXVlcnkgfTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gc3RhdHVzQXR0cmlidXRlc1txLnN0YXRlXSB8fCBzdGF0dXNBdHRyaWJ1dGVzLmVycm9yO1xuXG4gICAgICAgIGlmIChxLmVuZER0dG0pIHtcbiAgICAgICAgICBxLmR1cmF0aW9uID0gZkR1cmF0aW9uKHEuc3RhcnREdHRtLCBxLmVuZER0dG0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpbWUgPSBtb21lbnQocS5zdGFydER0dG0pLmZvcm1hdCgpLnNwbGl0KCdUJyk7XG4gICAgICAgIHEudGltZSA9IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHt0aW1lWzBdfSA8YnIgLz4ge3RpbWVbMV19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICAgIHEudXNlciA9IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJsaW5rXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHByb3BzLm9uVXNlckNsaWNrZWQocS51c2VySWQpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtxLnVzZXJ9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICk7XG4gICAgICAgIHEuZGIgPSAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwibGlua1wiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBwcm9wcy5vbkRiQ2xpY2tlZChxLmRiSWQpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtxLmRifVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApO1xuICAgICAgICBxLnN0YXJ0ZWQgPSBtb21lbnQocS5zdGFydER0dG0pLmZvcm1hdCgnSEg6bW06c3MnKTtcbiAgICAgICAgcS5xdWVyeWxpbmsgPSAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwibGlua1wiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvcGVuUXVlcnkocS5xdWVyeUlkKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leHRlcm5hbC1saW5rIG0tci0zXCIgLz5cbiAgICAgICAgICAgIHt0KCdFZGl0Jyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICk7XG4gICAgICAgIHEuc3FsID0gKFxuICAgICAgICAgIDxDYXJkIGNzcz17W1N0YXRpY1Bvc2l0aW9uXX0+XG4gICAgICAgICAgICA8SGlnaGxpZ2h0ZWRTcWxcbiAgICAgICAgICAgICAgc3FsPXtxLnNxbH1cbiAgICAgICAgICAgICAgcmF3U3FsPXtxLmV4ZWN1dGVkU3FsfVxuICAgICAgICAgICAgICBzaHJpbmtcbiAgICAgICAgICAgICAgbWF4V2lkdGg9ezYwfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICk7XG4gICAgICAgIGlmIChxLnJlc3VsdHNLZXkpIHtcbiAgICAgICAgICBxLm91dHB1dCA9IChcbiAgICAgICAgICAgIDxNb2RhbFRyaWdnZXJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiUmVzdWx0c01vZGFsXCJcbiAgICAgICAgICAgICAgdHJpZ2dlck5vZGU9e1xuICAgICAgICAgICAgICAgIDxMYWJlbCB0eXBlPVwiaW5mb1wiIGNsYXNzTmFtZT1cInBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIHt0KCdWaWV3IHJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1vZGFsVGl0bGU9e3QoJ0RhdGEgcHJldmlldycpfVxuICAgICAgICAgICAgICBiZWZvcmVPcGVuPXsoKSA9PiBvcGVuQXN5bmNSZXN1bHRzKHF1ZXJ5LCBwcm9wcy5kaXNwbGF5TGltaXQpfVxuICAgICAgICAgICAgICBvbkV4aXQ9eygpID0+IGNsZWFyUXVlcnlSZXN1bHRzKHF1ZXJ5KX1cbiAgICAgICAgICAgICAgbW9kYWxCb2R5PXtcbiAgICAgICAgICAgICAgICA8UmVzdWx0U2V0XG4gICAgICAgICAgICAgICAgICBzaG93U3FsXG4gICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgICAgICAgICAgYWN0aW9ucz17cHJvcHMuYWN0aW9uc31cbiAgICAgICAgICAgICAgICAgIGhlaWdodD17NDAwfVxuICAgICAgICAgICAgICAgICAgZGlzcGxheUxpbWl0PXtwcm9wcy5kaXNwbGF5TGltaXR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNwb25zaXZlXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWYgcXVlcnkgd2FzIHJ1biB1c2luZyBjdGFzIGFuZCBmb3JjZV9jdGFzX3NjaGVtYSB3YXMgc2V0XG4gICAgICAgICAgLy8gdGVtcFRhYmxlIHdpbGwgaGF2ZSB0aGUgc2NoZW1hXG4gICAgICAgICAgY29uc3Qgc2NoZW1hVXNlZCA9XG4gICAgICAgICAgICBxLmN0YXMgJiYgcS50ZW1wVGFibGUgJiYgcS50ZW1wVGFibGUuaW5jbHVkZXMoJy4nKSA/ICcnIDogcS5zY2hlbWE7XG4gICAgICAgICAgcS5vdXRwdXQgPSBbc2NoZW1hVXNlZCwgcS50ZW1wVGFibGVdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy4nKTtcbiAgICAgICAgfVxuICAgICAgICBxLnByb2dyZXNzID1cbiAgICAgICAgICBxLnN0YXRlID09PSAnc3VjY2VzcycgPyAoXG4gICAgICAgICAgICA8UHJvZ3Jlc3NCYXJcbiAgICAgICAgICAgICAgcGVyY2VudD17cGFyc2VJbnQocS5wcm9ncmVzcy50b0ZpeGVkKDApLCAxMCl9XG4gICAgICAgICAgICAgIHN0cmlwZWRcbiAgICAgICAgICAgICAgc2hvd0luZm89e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFByb2dyZXNzQmFyXG4gICAgICAgICAgICAgIHBlcmNlbnQ9e3BhcnNlSW50KHEucHJvZ3Jlc3MudG9GaXhlZCgwKSwgMTApfVxuICAgICAgICAgICAgICBzdHJpcGVkXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIHEuc3RhdGUgPSAoXG4gICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3N0YXR1cy5jb25maWcubGFiZWx9IHBsYWNlbWVudD1cImJvdHRvbVwiPlxuICAgICAgICAgICAgPHNwYW4+e3N0YXR1cy5jb25maWcuaWNvbn08L3NwYW4+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICApO1xuICAgICAgICBxLmFjdGlvbnMgPSAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxTdHlsZWRUb29sdGlwXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlc3RvcmVTcWwocXVlcnkpfVxuICAgICAgICAgICAgICB0b29sdGlwPXt0KFxuICAgICAgICAgICAgICAgICdPdmVyd3JpdGUgdGV4dCBpbiB0aGUgZWRpdG9yIHdpdGggYSBxdWVyeSBvbiB0aGlzIHRhYmxlJyxcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEljb25zLkVkaXQgaWNvblNpemU9XCJzbWFsbFwiIC8+XG4gICAgICAgICAgICA8L1N0eWxlZFRvb2x0aXA+XG4gICAgICAgICAgICA8U3R5bGVkVG9vbHRpcFxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvcGVuUXVlcnlJbk5ld1RhYihxdWVyeSl9XG4gICAgICAgICAgICAgIHRvb2x0aXA9e3QoJ1J1biBxdWVyeSBpbiBhIG5ldyB0YWInKX1cbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEljb25zLlBsdXNDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgIGljb25TaXplPVwieC1zbWFsbFwiXG4gICAgICAgICAgICAgICAgY3NzPXt2ZXJ0aWNhbEFsaWdufVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TdHlsZWRUb29sdGlwPlxuICAgICAgICAgICAgPFN0eWxlZFRvb2x0aXBcbiAgICAgICAgICAgICAgdG9vbHRpcD17dCgnUmVtb3ZlIHF1ZXJ5IGZyb20gbG9nJyl9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlbW92ZVF1ZXJ5KHF1ZXJ5KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEljb25zLlRyYXNoIGljb25TaXplPVwieC1zbWFsbFwiIC8+XG4gICAgICAgICAgICA8L1N0eWxlZFRvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBxO1xuICAgICAgfSlcbiAgICAgIC5yZXZlcnNlKCk7XG4gIH0sIFtwcm9wc10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJRdWVyeVRhYmxlXCI+XG4gICAgICA8VGFibGVWaWV3XG4gICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XG4gICAgICAgIGRhdGE9e2RhdGF9XG4gICAgICAgIGNsYXNzTmFtZT1cInRhYmxlLWNvbmRlbnNlZFwiXG4gICAgICAgIHBhZ2VTaXplPXs1MH1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5RdWVyeVRhYmxlLnByb3BUeXBlcyA9IHByb3BUeXBlcztcblF1ZXJ5VGFibGUuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCBRdWVyeVRhYmxlO1xuIl19 */\"] },\n      ___EmotionJSX(HighlightedSql, {\n        sql: q.sql,\n        rawSql: q.executedSql,\n        shrink: true,\n        maxWidth: 60 }));\n\n\n\n      if (q.resultsKey) {\n        q.output =\n        ___EmotionJSX(ModalTrigger, {\n          className: \"ResultsModal\",\n          triggerNode:\n          ___EmotionJSX(Label, { type: \"info\", className: \"pointer\" },\n          t('View results')),\n\n\n          modalTitle: t('Data preview'),\n          beforeOpen: () => openAsyncResults(query, props.displayLimit),\n          onExit: () => clearQueryResults(query),\n          modalBody:\n          ___EmotionJSX(ResultSet, {\n            showSql: true,\n            user: user,\n            query: query,\n            actions: props.actions,\n            height: 400,\n            displayLimit: props.displayLimit }),\n\n\n          responsive: true });\n\n\n      } else {\n        // if query was run using ctas and force_ctas_schema was set\n        // tempTable will have the schema\n        const schemaUsed =\n        q.ctas && q.tempTable && q.tempTable.includes('.') ? '' : q.schema;\n        q.output = [schemaUsed, q.tempTable].filter((v) => v).join('.');\n      }\n      q.progress =\n      q.state === 'success' ?\n      ___EmotionJSX(ProgressBar, {\n        percent: parseInt(q.progress.toFixed(0), 10),\n        striped: true,\n        showInfo: false }) :\n\n\n      ___EmotionJSX(ProgressBar, {\n        percent: parseInt(q.progress.toFixed(0), 10),\n        striped: true });\n\n\n      q.state =\n      ___EmotionJSX(Tooltip, { title: status.config.label, placement: \"bottom\" },\n      ___EmotionJSX(\"span\", null, status.config.icon));\n\n\n      q.actions =\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(StyledTooltip, {\n        onClick: () => restoreSql(query),\n        tooltip: t(\n        'Overwrite text in the editor with a query on this table'),\n\n        placement: \"top\" },\n\n      ___EmotionJSX(Icons.Edit, { iconSize: \"small\" })),\n\n      ___EmotionJSX(StyledTooltip, {\n        onClick: () => openQueryInNewTab(query),\n        tooltip: t('Run query in a new tab'),\n        placement: \"top\" },\n\n      ___EmotionJSX(Icons.PlusCircleOutlined, {\n        iconSize: \"x-small\",\n        css: verticalAlign })),\n\n\n      ___EmotionJSX(StyledTooltip, {\n        tooltip: t('Remove query from log'),\n        onClick: () => removeQuery(query) },\n\n      ___EmotionJSX(Icons.Trash, { iconSize: \"x-small\" })));\n\n\n\n      return q;\n    }).\n    reverse();\n  }, [props]);\n\n  return (\n    ___EmotionJSX(\"div\", { className: \"QueryTable\" },\n    ___EmotionJSX(TableView, {\n      columns: columns,\n      data: data,\n      className: \"table-condensed\",\n      pageSize: 50 })));\n\n\n\n};\n\nQueryTable.propTypes = propTypes;\nQueryTable.defaultProps = defaultProps;\n\nexport default QueryTable;","map":null,"metadata":{},"sourceType":"module"}