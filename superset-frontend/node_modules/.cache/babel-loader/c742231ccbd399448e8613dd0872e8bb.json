{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { logEvent } from 'src/logger/actions';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { componentLookup } from 'src/dashboard/components/gridComponents';\nimport getDetailedComponentWidth from 'src/dashboard/util/getDetailedComponentWidth';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { COLUMN_TYPE, ROW_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\ncreateComponent,\ndeleteComponent,\nupdateComponents,\nhandleComponentDrop } from\n'src/dashboard/actions/dashboardLayout';\nimport {\nsetDirectPathToChild,\nsetActiveTabs,\nsetFullSizeChartId } from\n'src/dashboard/actions/dashboardState';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  id: PropTypes.string,\n  parentId: PropTypes.string,\n  depth: PropTypes.number,\n  index: PropTypes.number,\n  renderHoverMenu: PropTypes.bool,\n  renderTabContent: PropTypes.bool,\n  onChangeTab: PropTypes.func,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  createComponent: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  directPathLastUpdated: PropTypes.number,\n  dashboardId: PropTypes.number.isRequired,\n  isComponentVisible: PropTypes.bool };\n\n\nconst defaultProps = {\n  isComponentVisible: true };\n\n\nfunction mapStateToProps(\n{ dashboardLayout: undoableLayout, dashboardState, dashboardInfo },\nownProps)\n{\n  const dashboardLayout = undoableLayout.present;\n  const { id, parentId } = ownProps;\n  const component = dashboardLayout[id];\n  const props = {\n    component,\n    getComponentById: (id) => dashboardLayout[id],\n    parentComponent: dashboardLayout[parentId],\n    editMode: dashboardState.editMode,\n    filters: getActiveFilters(),\n    dashboardId: dashboardInfo.id,\n    fullSizeChartId: dashboardState.fullSizeChartId };\n\n\n  // rows and columns need more data about their child dimensions\n  // doing this allows us to not pass the entire component lookup to all Components\n  if (component) {\n    const componentType = component.type;\n    if (componentType === ROW_TYPE || componentType === COLUMN_TYPE) {\n      const { occupiedWidth, minimumWidth } = getDetailedComponentWidth({\n        id,\n        components: dashboardLayout });\n\n\n      if (componentType === ROW_TYPE) props.occupiedColumnCount = occupiedWidth;\n      if (componentType === COLUMN_TYPE) props.minColumnWidth = minimumWidth;\n    }\n  }\n\n  return props;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    addDangerToast,\n    createComponent,\n    deleteComponent,\n    updateComponents,\n    handleComponentDrop,\n    setDirectPathToChild,\n    setFullSizeChartId,\n    setActiveTabs,\n    logEvent },\n\n  dispatch);\n\n}\n\nclass DashboardComponent extends React.PureComponent {\n  render() {\n    const { component } = this.props;\n    const Component = component ? componentLookup[component.type] : null;\n    return Component ? ___EmotionJSX(Component, this.props) : null;\n  }}\n\n\nDashboardComponent.propTypes = propTypes;\nDashboardComponent.defaultProps = defaultProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DashboardComponent);","map":null,"metadata":{},"sourceType":"module"}